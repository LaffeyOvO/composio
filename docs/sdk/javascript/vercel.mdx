---
title: "Using Composio JS SDK with Vercel AI"
sidebarTitle: "With Vercel AI"
icon: "code"
description: "Use Composio JS SDK with Vercel AI"
---

<Steps>
<Step title="Import Dependencies">
 <CodeGroup>
      ```javascript Import Vercel AI and Vercel AIToolSet
import { generateText } from "ai";
import { openai } from "@ai-sdk/openai";
import { VercelAIToolSet } from "composio-core";
import dotenv from "dotenv";
      ```
    </CodeGroup>
</Step>
<Step title="Define method to let user connect their Google account">

 <CodeGroup>
      ```typescript Define method to let user connect their Google account
dotenv.config();

const toolset = new VercelAIToolSet({
        apiKey: process.env.COMPOSIO_API_KEY,
});

async function setupUserConnectionIfNotExists(entityId) {
        const entity = await toolset.client.getEntity(entityId);
        const connection = await entity.getConnection('googlesheets');

        if (!connection) {
            // If this entity/user hasn't already connected the account
            const connection = await entity.initiateConnection(appName);
            console.log("Log in via: ", connection.redirectUrl);
            return connection.waitUntilActive(60);
        }

        return connection;
}
      ```
    </CodeGroup>

Learn more about entities [here](introduction/foundations/components/entity/entity-guide)

</Step>

<Step title="Setup Agent with Vercel AI">

<CodeGroup>
      ```typescript Define your Agent
async function executeAgent(entityName) {
        // setup entity
        const entity = await toolset.client.getEntity(entityName);
        await setupUserConnectionIfNotExists(entity.id);

        // get tools based on actions
        const tools = await toolset.get_actions({
            actions: ["googlesheets_create_google_sheet1"],
        });

        // Call generateText with required tools and toolChoice set to required.
        const result = await generateText({
            model: openai("gpt-4-turbo"),
            tools,
            toolChoice: "required",
            prompt: "Create a google sheet on my account",
        });

        // Call handle_tool_call method from toolset with result.toolCalls and entity.id as arguments
        const final = await toolset.handle_tool_call(result.toolCalls, entity.id);
        console.log(final);
}

      ```
    </CodeGroup>

</Step>

<Step title="Invoke Your Agent">

<CodeGroup>
      ```typescript  Invoke the Agent
      executeAgent("default")
      ```
    </CodeGroup>

Tada ðŸŽ‰! It was this simple to create a powerful Agent with Composio and Vercel AI.
</Step>

<Step title="Complete code snippet">
View the full snippet [here](https://github.com/ComposioHQ/composio-js/blob/main/examples/vercel/demo.mjs)
</Step>
</Steps>


